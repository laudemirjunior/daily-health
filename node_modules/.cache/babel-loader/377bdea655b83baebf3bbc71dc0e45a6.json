{"ast":null,"code":"var _jsxFileName = \"/home/jpnonato/kenzie/sprint-4/entrega-1/projeto-gestao-de-habitos/src/pages/login/index.jsx\",\n    _s = $RefreshSig$();\n\nimport Button from '../../components/button';\nimport { TextField } from '@material-ui/core';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useHistory, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport * as yup from 'yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  var _errors$email, _errors$password;\n\n  const history = useHistory();\n\n  const linkTo = path => history.push(path);\n\n  const schema = yup.object().shape({\n    email: yup.string().required(''),\n    password: yup.string().required('')\n  });\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const handleForm = data => {\n    axios.post('https://kenziehub.herokuapp.com/sessions', data).then(response => {\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('@Doit:token', JSON.stringify(token));\n      localStorage.setItem('@Doit:user', JSON.stringify(user.techs));\n      localStorage.setItem('@Doit:id', JSON.stringify(user.id));\n      return history.push('/home');\n    }).catch(err => setError(err.message));\n    console.log(typeof error);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(handleForm),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"E-mail\",\n          margin: \"normal\",\n          variant: \"filled\",\n          color: \"primary\",\n          ...register('email'),\n          error: !!errors.email,\n          helperText: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message,\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Senha\",\n          type: \"password\",\n          margin: \"normal\",\n          variant: \"filled\",\n          color: \"primary\",\n          ...register('password'),\n          error: !!errors.password,\n          helperText: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message,\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          size: \"large\",\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"large\",\n          variant: \"contained\",\n          color: \"warning\",\n          onClick: () => linkTo('/'),\n          children: \"Voltar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      id: \"outlined-basic\",\n      label: \"Outlined\",\n      variant: \"outlined\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"username\",\n      type: \"text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"senha\",\n      type: \"password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"logar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"vm3Iqbg+exzko8WhXnwFFAMMecQ=\", false, function () {\n  return [useHistory, useForm];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/jpnonato/kenzie/sprint-4/entrega-1/projeto-gestao-de-habitos/src/pages/login/index.jsx"],"names":["Button","TextField","useForm","yupResolver","useHistory","Redirect","axios","yup","Login","history","linkTo","path","push","schema","object","shape","email","string","required","password","register","handleSubmit","formState","errors","resolver","handleForm","data","post","then","response","token","user","localStorage","setItem","JSON","stringify","techs","id","catch","err","setError","message","console","log","error"],"mappings":"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","sourcesContent":["import Button from '../../components/button'\nimport { TextField} from '@material-ui/core'\nimport {useForm} from 'react-hook-form'\nimport {yupResolver} from '@hookform/resolvers/yup'\nimport { useHistory, Redirect } from 'react-router-dom'\nimport axios from 'axios'\nimport * as yup from 'yup'\n\nconst Login = () => {\n\n  const history = useHistory()\n\n  const linkTo = (path) => history.push(path)\n\n  const schema = yup.object().shape({\n    email: yup.string().required(''),\n    password: yup\n    .string()\n    .required(''),\n    \n  })\n\n  const { \n      register,\n      handleSubmit,\n      formState: {errors}\n  } = useForm({resolver: yupResolver(schema)})\n\n  const handleForm = (data) => {\n    axios.post('https://kenziehub.herokuapp.com/sessions', data)\n    .then((response) => {\n        const{token, user} = response.data\n\n        localStorage.setItem('@Doit:token', JSON.stringify(token))\n        localStorage.setItem('@Doit:user', JSON.stringify(user.techs))\n        localStorage.setItem('@Doit:id', JSON.stringify(user.id))\n\n        return history.push('/home')\n    })\n    .catch((err) => setError(err.message)) \n    \n    console.log(typeof error)\n}\n\n\n  return (\n    <div>\n       <form onSubmit={handleSubmit(handleForm)}>\n            <div className='input'>\n                <TextField \n                    label='E-mail'\n                    margin='normal'\n                    variant='filled'\n                    color='primary'\n                    {...register('email')}\n                    error={!!errors.email}\n                    helperText={errors.email?.message}\n                    fullWidth\n                />          \n            </div>\n            <div className='input'>\n                <TextField \n                    label='Senha'\n                    type='password'\n                    margin='normal'\n                    variant='filled'\n                    color='primary'\n                    {...register('password')}\n                    error={!!errors.password}\n                    helperText={errors.password?.message}\n                    fullWidth\n                />          \n            </div>\n            <div className='buttons'>\n                <Button size=\"large\" type='submit' variant='contained' color='primary'>\n                    Login\n                </Button>\n                <Button size=\"large\" variant='contained' color='warning' onClick={() => linkTo('/')}>\n                    Voltar\n                </Button>\n            </div>\n        </form>\n        <TextField id=\"outlined-basic\" label=\"Outlined\" variant=\"outlined\" />\n        <input placeholder='username' type='text' />\n        <input placeholder='senha' type='password' />\n        <button>logar</button>\n    </div>\n  )\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}