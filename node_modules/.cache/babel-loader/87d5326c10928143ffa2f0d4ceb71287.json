{"ast":null,"code":"var _jsxFileName = \"/home/laudemir/\\xC1rea de Trabalho/projeto-gestao-de-habitos/src/Providers/myGroupList/index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport api from \"../../services\";\nimport { useJwt } from \"react-jwt\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MyGroupListContext = /*#__PURE__*/createContext();\nexport const MyGroupListProvider = ({\n  children\n}) => {\n  _s();\n\n  const [myGroupList, setMygroupList] = useState([]);\n  const token = JSON.parse(localStorage.getItem(\"@KenzieHealth:token\")) || \"\";\n  const {\n    decodedToken\n  } = useJwt(token);\n\n  const notifyGetMyGroupList = () => toast.error(\"Erro ao carregar sua lista de grupos!\");\n\n  const notifyCreateGroup = () => toast.error(\"Erro ao criar seu grupo!\");\n\n  const notifySubscribe = () => toast.error(\"Erro ao se escrever no grupo!\");\n\n  const notifyUnSubscribe = () => toast.error(\"Erro ao desinscrever do grupo!\");\n\n  const getMyGroupList = () => {\n    api.get(\"/groups/subscriptions/\", {\n      headers: {\n        Authorization: token\n      }\n    }).then(response => setMygroupList(response.data)).catch(err => notifyGetMyGroupList());\n  };\n\n  useEffect(() => {\n    getMyGroupList();\n  }, []);\n\n  const createGroup = groupInfo => {\n    console.log(groupInfo);\n    api.post(\"/groups/\", groupInfo, {\n      headers: {\n        Authorization: token\n      }\n    }).then(() => getMyGroupList()).catch(() => notifyCreateGroup());\n  };\n\n  const subscribe = group => {\n    api.post(`/groups/${group.id}/subscribe/`, null, {\n      headers: {\n        Authorization: token\n      }\n    }).then(() => getMyGroupList()).catch(() => notifySubscribe());\n  };\n\n  const unSubscribe = group => {\n    api.delete(`/groups/${group.id}/unsubscribe/`, {\n      headers: {\n        Authorization: token\n      }\n    }).then(() => getMyGroupList()).catch(() => notifyUnSubscribe());\n  };\n\n  return /*#__PURE__*/_jsxDEV(MyGroupListContext.Provider, {\n    value: {\n      myGroupList,\n      setMygroupList,\n      createGroup,\n      subscribe,\n      unSubscribe\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MyGroupListProvider, \"zz3wfIXGfBjAIuxO48ro4oCA8gk=\", false, function () {\n  return [useJwt];\n});\n\n_c = MyGroupListProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyGroupListProvider\");","map":{"version":3,"sources":["/home/laudemir/Ãrea de Trabalho/projeto-gestao-de-habitos/src/Providers/myGroupList/index.js"],"names":["createContext","useState","useEffect","toast","api","useJwt","MyGroupListContext","MyGroupListProvider","children","myGroupList","setMygroupList","token","JSON","parse","localStorage","getItem","decodedToken","notifyGetMyGroupList","error","notifyCreateGroup","notifySubscribe","notifyUnSubscribe","getMyGroupList","get","headers","Authorization","then","response","data","catch","err","createGroup","groupInfo","console","log","post","subscribe","group","id","unSubscribe","delete"],"mappings":"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","sourcesContent":["import { createContext, useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport api from \"../../services\";\nimport { useJwt } from \"react-jwt\";\n\nexport const MyGroupListContext = createContext();\n\nexport const MyGroupListProvider = ({ children }) => {\n  const [myGroupList, setMygroupList] = useState([]);\n  const token = JSON.parse(localStorage.getItem(\"@KenzieHealth:token\")) || \"\";\n  const { decodedToken } = useJwt(token);\n  const notifyGetMyGroupList = () =>\n    toast.error(\"Erro ao carregar sua lista de grupos!\");\n  const notifyCreateGroup = () => toast.error(\"Erro ao criar seu grupo!\");\n  const notifySubscribe = () => toast.error(\"Erro ao se escrever no grupo!\");\n  const notifyUnSubscribe = () => toast.error(\"Erro ao desinscrever do grupo!\");\n\n  const getMyGroupList = () => {\n    api\n      .get(\"/groups/subscriptions/\", {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then((response) => setMygroupList(response.data))\n      .catch((err) => notifyGetMyGroupList());\n  };\n\n  useEffect(() => {\n    getMyGroupList();\n  }, []);\n\n  const createGroup = (groupInfo) => {\n    console.log(groupInfo);\n    api\n      .post(\"/groups/\", groupInfo, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then(() => getMyGroupList())\n      .catch(() => notifyCreateGroup());\n  };\n\n  const subscribe = (group) => {\n    api\n      .post(`/groups/${group.id}/subscribe/`, null, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then(() => getMyGroupList())\n      .catch(() => notifySubscribe());\n  };\n\n  const unSubscribe = (group) => {\n    api\n      .delete(`/groups/${group.id}/unsubscribe/`, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then(() => getMyGroupList())\n      .catch(() => notifyUnSubscribe());\n  };\n\n  return (\n    <MyGroupListContext.Provider\n      value={{\n        myGroupList,\n        setMygroupList,\n        createGroup,\n        subscribe,\n        unSubscribe,\n      }}\n    >\n      {children}\n    </MyGroupListContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}